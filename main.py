import random  # импортируем модуль random для генерации случайных чисел
# задаем список значений, из которых будет состоять матрица
values = [-15, -4, -2, -7, 0, 3, 5, 12, 9]
# генерируем случайное число для количества строк (высоты матрицы) от 4 до 8
height = random.randint(4, 8)
# генерируем случайное число для количества столбцов (ширины матрицы) от 4 до 8
width = random.randint(4, 8)
# создаем пустую матрицу
matrix = []
# наполняем матрицу значениями
for i in range(height):  # проходим по количеству строк
    row = []  # создаем новую строку
    for j in range(width):  # проходим по количеству столбцов
        # выбираем случайное значение из списка values и добавляем в строку
        row.append(random.choice(values))
    # добавляем строку в матрицу
    matrix.append(row)
# выводим матрицу в форматированном виде
for row in matrix:  # проходим по каждой строке матрицы
    print('\t'.join(map(str, row)))  # преобразуем значения в строки и выводим с табуляцией
# подсчитываем сумму всех элементов, которые не делятся на 3 
sum_3 = 0 
for row in matrix: # проходим по каждой строке матрицы 
    for value in row: # проходим по каждому элементу строки 
        if value % 3 != 0: # проверяем, не делится ли элемент на 3 
            sum_3 += value # если не делится, добавляем к сумме 
print(f'Сумма всех элементов, некратных 3: {sum_3}')
